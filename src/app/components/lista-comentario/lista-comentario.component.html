<div class="container pt-4">
    <div class="row">
        <div class="card">
            <div class="card-body">
                <span class="h3">Lista de comentarios  <div *ngIf="loading" class="spinner-border float-right" role="status">
                    <span class="sr-only">Cargando...</span>
            </div>
            </span>
            <button class="btn btn-primary btn-lg float-right" routerLink="/crearcomentario">Agregar</button>
            <h5 style="margin-top: 30px;" *ngIf="comments.length == 0">No hay datos para mostrar</h5>
            <table *ngIf="comments.length > 0" class="table table-striped mt-5">
                <thead>
                    <tr>
                        <th>Usuario</th>
                        <th>Fecha</th>
                        <th>Comentario</th>
                        <th>Resultado</th>
                        <th>Detalle</th>
                    </tr>
                </thead>
                <tbody>
                    <tr *ngFor="let comment of comments">
                        <td>{{comment.user}}</td>
                        <td>{{comment.fechacreacion}}</td>
                        <td>{{comment.comment}}</td>
                        <td>{{comment.polarity | polaridad}}</td>
                        <td style="text-align: center;">
                            <button type="button" class="btn btn-info" (click)="openDetail(commentDetailsModal, comment)" title="Detalle"><i class=" fas fa-info-circle "></i></button></td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<ng-template #commentDetailsModal let-modal>
    <div class="modal-header " tabindex="1">
        <h4 class="motal-title ">Detalle</h4>
        <button type="button" class="close " aria-label="close " (click)="modal.dismiss()">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal-body ">
        <form [formGroup]="commentDetailForm">
            <div class="card">
                <div class="card-body">
                    <div class="form-row">
                        <div class="form-group col-md-3">
                            <label for="inputUser">Usuario</label>
                            <input type="text" readonly class="form-control" id="inputUser" formControlName="user">
                        </div>
                        <div class="form-group col-md-3">
                            <label for="inputPolarity">Polaridad</label>
                            <input type="number" readonly class="form-control" id="inputPolarity" formControlName="polarity">
                        </div>
                        <div class="form-group col-md-3">
                            <label for="inputresult">Resultado</label>
                            <input type="text" readonly class="form-control" id="inputresult" formControlName="result">
                        </div>
                        <div class="form-group col-md-3">
                            <label for="inputDate">Fecha</label>
                            <input type="text" readonly class="form-control" id="inputDate" formControlName="fechacreacion">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group col-md-12">
                            <label for="inputcomment">Comentario</label>
                            <input type="text" readonly class="form-control" id="inputcomment" formControlName="comment">
                        </div>
                    </div>
                    <div class="form-row"></div>

                    <table *ngIf="comments.length > 0" class="table table-striped mt-5">
                        <thead>
                            <tr>
                                <th>Sentencia</th>
                                <th>Polaridad</th>
                                <th>Resultado</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let sentence of commentsDetail">
                                <td>{{sentence.sentence}}</td>
                                <td>{{sentence.polarity}}</td>
                                <td>{{sentence.polarity | polaridad}}</td>

                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </form>
    </div>
    <div class="modal-footer ">
        <button type="text" class="btn btn-secondary btn-lg mr-3" (click)="modal.close()">Cerrar</button>
    </div>
</ng-template>






</div>